/* ═══════════════════════════════════════════════════════════════════
   ⚙️ PREFERENCES FEATURE - Layout Styles
   /src/features/settings/preferences/preferences.css

   Feature-level CSS (ft-*) - Cards use Card.standard VR
   ═══════════════════════════════════════════════════════════════════ */

/* Container */
.ft-preferences {
  display: flex;
  flex-direction: column;
  gap: var(--space-xl);
  max-width: 1200px;
  overflow: visible !important;
}

/* Ensure Card doesn't clip animations */
.ft-preferences .vr-card {
  overflow: visible !important;
}

/* ─────────────────────────────────────────────────────────────────────
   Avatar Row: Grid + Preview side by side
   ───────────────────────────────────────────────────────────────────── */

.ft-preferences-avatar-row {
  display: flex;
  align-items: center;
  justify-content: space-evenly;
  width: 100%;
  overflow: visible;
}

/* Radio container opacity when disabled */
.ft-preferences-enchant-radio {
  --preferences-page-text-size: 14px;
  --preferences-page-text-weight: normal;

  display: flex;
  flex-direction: column;
  gap: 0;
  opacity: 0.35;
  transition: opacity 0.3s ease;
}

.ft-preferences-enchant-radio--active {
  opacity: 1;
}

/* Remove not-allowed cursor when disabled */
.ft-preferences-enchant-radio .vr-radio-fancy-label--disabled,
.ft-preferences-enchant-radio .vr-radio-fancy-button--disabled {
  cursor: default;
}

/* Override VR: Adjust spacing and width for enchantment options */
.ft-preferences-enchant-radio .vr-radio-fancy-label {
  display: block;
  width: 200px;
  padding: 12px var(--space-md);
  border-radius: var(--radius-sm);
  transition: all var(--duration-fast) var(--easing);
}

/* Label styling: darker color */
.ft-preferences-enchant-radio .vr-radio-fancy-label strong {
  color: var(--text-primary);
}

/* Description styling: lighter color + italic */
.ft-preferences-enchant-radio .vr-radio-fancy-desc {
  color: var(--text-tertiary);
  font-style: italic;
}

/* Subtle inset effect when selected */
.ft-preferences-enchant-radio .vr-radio-fancy-input:checked ~ .vr-radio-fancy-label {
  box-shadow: inset 0 1px 2px rgb(0 0 0 / 12%);
  background: rgb(0 0 0 / 1%);
}

/* Override VR radio group spacing */
.ft-preferences-enchant-radio .vr-radio-fancy-group {
  gap: 0;
}

/* Tighter spacing between radio rows */
.ft-preferences-enchant-radio .vr-radio-fancy-row {
  margin-bottom: -4px;
}

.ft-preferences-enchantment-label {
  /* Empty placeholder - no text content */
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: var(--space-xs);
  padding-left: 28px; /* Aligns with radio text (20px radio + 8px gap) */
}

/* Star wrapper - centered with label underneath */
.ft-preferences-star-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  align-self: center;
  overflow: visible !important;
}

/* Smaller star for enchantment */
.ft-star-toggle--enchantment {
  width: 32px;
  height: 32px;
  transition: opacity 0.2s ease;
}

.ft-star-toggle--enchantment:hover {
  opacity: 0.6;
}

/* ─────────────────────────────────────────────────────────────────────
   Live Preview (right column)
   ───────────────────────────────────────────────────────────────────── */

.ft-preferences-preview-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
}

.ft-preferences-preview-label {
  /* Empty placeholder - no text content */
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.ft-preferences-preview {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-lg);
  background: rgb(0 0 0 / 0.7%);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-light);
}

.ft-preferences-preview-avatar-container {
  position: relative;
  width: 120px;
  height: 120px;
}

.ft-preferences-preview-avatar {
  width: 120px;
  height: 120px;
  border-radius: var(--radius-lg);
  position: relative;
  z-index: 2;
}

.ft-preferences-preview-twinkle {
  position: absolute;
  top: 35%;
  left: 48%;
  transform: translate(-50%, -50%);
  width: 140px;
  height: 140px;
  pointer-events: none;
  z-index: 1;
}


/* ─────────────────────────────────────────────────────────────────────
   Avatar Selection Grid
   ───────────────────────────────────────────────────────────────────── */

.ft-preferences-avatar-grid {
  display: grid;
  grid-template-columns: repeat(3, 80px);
  gap: var(--space-md);
}

.ft-preferences-avatar-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-xs);
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  transition: all var(--duration-fast) var(--easing);
}

.ft-preferences-avatar-image {
  width: 80px;
  height: 80px;
  aspect-ratio: 1;
  border-radius: var(--radius-md);
  transition: all var(--duration-fast) var(--easing);
}

/* Selected avatar is more opaque than hover */
.ft-preferences-avatar-option--active .ft-preferences-avatar-image {
  opacity: 0.7;
}

.ft-preferences-avatar-option:hover .ft-preferences-avatar-image {
  opacity: 0.85;
}

/* Disable hover effect on selected avatar */
.ft-preferences-avatar-option--active:hover .ft-preferences-avatar-image {
  opacity: 0.7;
}


/* ─────────────────────────────────────────────────────────────────────
   Star Toggle Button (Enchantment Toggle)
   From Uiverse.io by anishwij - adapted with ft-* namespace
   ───────────────────────────────────────────────────────────────────── */

.ft-star-toggle {
  --preferences-page-star-color: rgb(250 190 21);

  position: relative;
  width: 64px;
  height: 64px;
  transition: transform 0.3s ease;
  cursor: pointer;
}

.ft-star-toggle .ft-star-checkbox {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  z-index: 20;
  cursor: pointer;
}

.ft-star-toggle .ft-star-svg-container {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: visible;
  position: relative;
}

.ft-star-toggle .ft-star-svg-bg {
  fill: transparent;
  position: absolute;
  width: 100%;
  height: 100%;
}

.ft-star-toggle .ft-star-svg-outline {
  fill: var(--border-light);
  position: absolute;
  width: 100%;
  height: 100%;
  transition: all 0.3s ease;
}

.ft-star-toggle .ft-star-svg-filled {
  fill: var(--preferences-page-star-color);
  position: absolute;
  width: 100%;
  height: 100%;
  transition: all 0.3s ease;
  animation: ft-preferences-page-star-filled 1s;
  opacity: 0;
  transform: scale(0);
}

.ft-star-toggle .ft-star-svg-celebrate {
  position: absolute;
  display: none;
  visibility: hidden;
  stroke: var(--preferences-page-star-color);
  fill: var(--preferences-page-star-color);
  stroke-width: 2px;
  pointer-events: none;
}

/* stylelint-disable selector-max-specificity -- checkbox+sibling combinator pattern requires high specificity */
.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-svg-outline {
  opacity: 0;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-svg-filled {
  opacity: 1;
  transform: scale(1);
}

.ft-star-toggle .ft-star-checkbox:not(:checked) ~ .ft-star-svg-container .ft-star-svg-filled {
  animation: ft-preferences-page-star-unfilled 0.3s forwards;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-svg-celebrate {
  display: block;
  visibility: visible;
}

/* Base particle state - hidden by default (offset behind star center) */
.ft-star-toggle .ft-star-particle {
  opacity: 0;
  visibility: hidden;
  fill: transparent;
  transform: translate(-26px, -6px);
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle {
  opacity: 1;
  visibility: visible;
  fill: var(--preferences-page-star-color);
}

/* Only animate particles when checked */
.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(1) {
  animation: ft-preferences-page-particle-1 1s cubic-bezier(0.25, 0.1, 0.25, 1);
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(2) {
  animation: ft-preferences-page-particle-2 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(3) {
  animation: ft-preferences-page-particle-3 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(4) {
  animation: ft-preferences-page-particle-4 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(5) {
  animation: ft-preferences-page-particle-5 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(6) {
  animation: ft-preferences-page-particle-6 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(7) {
  animation: ft-preferences-page-particle-7 1s ease-out;
}

.ft-star-toggle .ft-star-checkbox:checked ~ .ft-star-svg-container .ft-star-particle:nth-child(8) {
  animation: ft-preferences-page-particle-8 1s ease-out;
}
/* stylelint-enable selector-max-specificity */

@keyframes ft-preferences-page-star-filled {
  0% {
    transform: scale(0);
    opacity: 0;
  }

  25% {
    transform: scale(1.2);
    opacity: 1;
    fill: rgb(250 190 21 / 75%);
  }

  50% {
    transform: scale(1);
    fill: rgb(250 190 21 / 75%);
  }

  100% {
    fill: var(--preferences-page-star-color);
  }
}

@keyframes ft-preferences-page-star-unfilled {
  0% {
    transform: scale(1);
    opacity: 1;
  }

  100% {
    transform: scale(0);
    opacity: 0;
  }
}

@keyframes ft-preferences-page-particle-1 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  40% {
    transform: translate(-20px, -25px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(-40px, 40px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-preferences-page-particle-2 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  40% {
    transform: translate(20px, -25px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(40px, 40px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-preferences-page-particle-3 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  40% {
    transform: translate(-30px, -20px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(-50px, 45px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-preferences-page-particle-4 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  40% {
    transform: translate(30px, -20px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(50px, 45px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-preferences-page-particle-5 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  45% {
    transform: translate(0, -30px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(0, 40px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-preferences-page-particle-6 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  35% {
    transform: translate(-35px, -15px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(-60px, 50px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-preferences-page-particle-7 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  35% {
    transform: translate(35px, -15px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(60px, 50px) scale(0);
    opacity: 0;
  }
}

@keyframes ft-preferences-page-particle-8 {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }

  45% {
    transform: translate(0, -35px) scale(0.6);
    opacity: 0.6;
  }

  100% {
    transform: translate(0, 45px) scale(0);
    opacity: 0;
  }
}

/* Mobile adjustments */
@media (max-width: 640px) {
  .ft-preferences-avatar-row {
    flex-direction: column;
    gap: var(--space-xl);
  }

  .ft-preferences-preview {
    order: -1; /* Move preview to top on mobile */
    width: 100%;
  }
}

@media (max-width: 480px) {
  .ft-preferences-avatar-grid {
    grid-template-columns: repeat(3, 60px);
    gap: var(--space-xs);
  }

  .ft-preferences-avatar-image {
    width: 60px;
    height: 60px;
  }

  .ft-preferences-preview-avatar-container,
  .ft-preferences-preview-avatar {
    width: 100px;
    height: 100px;
  }
}
